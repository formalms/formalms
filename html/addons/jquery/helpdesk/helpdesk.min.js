function validateEmail(e){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}function getScreenSize(){return window.matchMedia("(orientation: portrait)").matches?{width:screen.width,height:screen.height}:{width:screen.height,height:screen.width}}$(document).ready(function(){$("#_HELPDESK").click(function(){$("#_HELPDESK").attr("href","#"),$("#send_request").hide(),$("#disclaimer").prop("checked",!1),$("#modal_helpdesk").modal("show")}),$("#disclaimer").change(function(){$("#disclaimer").is(":checked")?$("#send_request").show():$("#send_request").hide()}),$("#contact").submit(function(){return!1}),$("#send_request").on("click",function(){var e=$("#email").val(),a=$("#msg").val().length,t=$("#oggetto").val().length,r=validateEmail(e),s=$("#msg_ok").val(),n=$("#sendto").val(),o=validateEmail(n);if(r?$("#email").removeClass("error"):$("#email").addClass("error"),a>=4?$("#amsg").removeClass("error"):$("#msg").addClass("error"),t>=1?$("#alphaoggetto").removeClass("error"):$("#oggetto").addClass("error"),t<1?$("#div_err_obj").html(window.frontend.config.lang.translations.customer_help._OBJ_MISSING):$("#div_err_obj").html(""),t<1?$("#div_err_obj").addClass("alert alert-danger"):$("#div_err_obj").removeClass("alert alert-danger"),a<4?$("#div_err_msg").html(window.frontend.config.lang.translations.customer_help._MSG_MISSING):$("#div_err_msg").html(""),a<4?$("#div_err_msg").addClass("alert alert-danger"):$("#div_err_msg").removeClass("alert alert-danger"),!0==r&&a>=4&&t>=1&&!0==o){$("#send").fadeOut(),$("#send-loading").fadeIn(),screen_size=getScreenSize(),document.getElementById("help_req_resolution").value="width: "+screen_size.width+" height: "+screen_size.height;var d=new FormData;d.append("sendto",$("#sendto").val()),d.append("email",$("#email").val()),d.append("msg",$("#msg").val()),d.append("telefono",$("#telefono").val()),d.append("username",$("#username").val()),d.append("oggetto",$("#oggetto").val()),d.append("priorita",$("#priorita").val()),d.append("help_req_resolution",$("#help_req_resolution").val()),$.ajax({type:"POST",url:"ajax.server.php?r=helpdesk/show",data:d,cache:!1,contentType:!1,processData:!1,success:function(e){"true"==e&&$("#contact").fadeOut("fast",function(){$(this).before('<p id="success-hd-message"><strong>'+s+"</strong></p>"),setTimeout(function(){$.fancybox.close(),$("#contact").fadeIn(),$("#success-hd-message").remove(),$("#send-loading").fadeOut(),$("#send").fadeIn()},3e3)})}})}})});